

    {% set imageformats = ['gif', 'jpg', 'jpeg', 'png', 'svg'] %}

<div class="row">
    {% for file in finder.files() %}
{#        {{ dump(file) }}#}

        {% set extension = file.extension() %}
        {% set filename = path ~ file.getRelativePathname() %}
        {% set icon = 'fa-file' %}
        {% set link = path('bolt_file_edit', {'location': location, 'file': filename }) %}
        {% set thumbnail = '' %}
        {% set title = '' %}
        {% set dimensions = '' %}

        {% if extension in imageformats %}
            {% set thumbnail = filename|thumbnail(width = 400, height = 300, location = location, fit = 'crop') %}
            {% set icon = 'fa-image' %}
            {% set link = path('bolt_media_new', {'location': location, 'file': filename}) %}

            {% for image in media|default([]) if image.filename in filename %}
                {% set title = image.title %}
                {% set dimensions = image.width ~ ' Ã— ' ~ image.height ~ 'px' %}
                {% set link = path('bolt_media_edit', {'id': image.id}) %}
            {% endfor %}

        {% endif %}

    <div class="col-sm-3 pr-0 pb-3">
        <div class="card">
            {%- if thumbnail -%}
                <a href="{{ filename|thumbnail(width = 1000, height = 1000, location = location) }}" class="lightbox">
                    <img src="{{ thumbnail }}" class="card-img-top">
                </a>
            {%- endif -%}

            <div class="card-body">
                <i class="fas {{ icon }}"></i>&nbsp;<a href="{{ link }}">{{ file.getRelativePathname|excerpt(12) }}</a>

                <div class="btn-group">
                    <button
                            type="button"
                            class="btn btn-sm btn-secondary edit-actions__dropdown-toggler dropdown-toggle dropdown-toggle-split"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false"
                    >
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <div class="edit-actions__dropdown dropdown-menu dropdown-menu-right" style="width: 320px;">
                        <a class="dropdown-item" href="{{ asset(file.filename, 'files') }}" target="_blank">
                            <i class="fas fa-w fa-external-link-square-alt"></i>
                            View original
                        </a>
                        <a class="dropdown-item" href="#">
                            <i class="far fa-w fa-copy"></i>
                            Duplicate {{ file.getRelativePathname }}
                        </a>
                        <a class="dropdown-item" href="#" data-confirmation="Are you sure you wish to delete this Content?">
                            <i class="fas fa-w fa-trash"></i>
                            Delete {{ file.getRelativePathname }}
                        </a>

                        <div class="dropdown-divider"></div>

                        <span class="dropdown-item-text">
                            <i class="fas fa-link fa-w"></i>
                            Filename: <code :title="file.fieldValues.slug">{{ file.getRelativePathname }}</code>
                        </span>

                        {% if title %}
                            <span class="dropdown-item-text">
                            <i class="fas fa-asterisk fa-w"></i>
                            Title: {{ title }}
                        </span>
                        {% endif %}

                        {% if dimensions %}
                            <span class="dropdown-item-text">
                            <i class="fas fa-asterisk fa-w"></i>
                            Dimensions: {{ dimensions }}
                        </span>
                        {% endif %}

                        <span class="dropdown-item-text">
                            <i class="far fa-calendar-alt fa-w"></i>
                            Published on: <strong>{-{ file.publishedAt|localedatetime }}</strong>
                        </span>
                        <span class="dropdown-item-text">
          <i class="fas fa-redo fa-w"></i>
          Last modified on: <strong>{-{ file.modifiedAt|localedatetime }}</strong>
        </span>
                    </div>
                </div>

            </div>
            <div class="card-body">

                {{ file.getSize() }}&nbsp;bytes
                {% if dimensions %}<br><small style="color: #888;">{{ dimensions }}</small>{% endif %}
                {{ file.getCTime()|localizeddate('short', 'short', null, 'UTC') }}
            </div>
        </div>
    </div>

    {% endfor %}
</div>